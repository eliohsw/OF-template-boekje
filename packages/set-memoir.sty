\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{packages/set-memoir}[2026/01/11 v0.6.1 Basic packages for memoir class]

\RequirePackage{iftex}
\ifXeTeX\else
  \PackageError{packages/set-memoir}
    {This package requires XeLaTeX (XeTeX engine)}
    {You are compiling with a non-XeTeX engine.\MessageBreak
     Please switch to XeLaTeX.}
\fi

% Declare options
\newif\ifpackagesetmemoirenglish

\DeclareOption{en}{\packagesetmemoirenglishtrue}
\DeclareOption{de}{\packagesetmemoirenglishfalse}

\newif\ifpackagesetmemoirglossary
\DeclareOption{glo}{\packagesetmemoirglossarytrue}

\newif\ifpackagesetmemoirindex
\DeclareOption{idx}{\packagesetmemoirindextrue}

\ExecuteOptions{en}
\ProcessOptions\relax

% ========================================================================

\DisemulatePackage{setspace}
\RequirePackage{setspace}      % Adjust line spacing
\RequirePackage{titling}       % Customize the title
\RequirePackage{tocloft}       % Control TOC formatting

\AtBeginDocument{%
  \setlength{\headheight}{15pt}%
  \setlength{\droptitle}{-1cm}%
  \setlength{\headsep}{0.3cm}%
  \setlength{\parskip}{0.8em}%
  \setlength{\baselineskip}{18pt}%
}

% ========================================================================

\RequirePackage[x11names]{xcolor}  % For extended color support
\RequirePackage{graphicx}          % For including images
\RequirePackage{pgfplots}          % For plotting data
\RequirePackage[most]{tcolorbox}   % For creating colorful boxes (depends on xcolor, pgf)
\RequirePackage{tikz}              % For drawing diagrams
\RequirePackage{tikzpagenodes}     % For drawing on the page
\RequirePackage{tkz-euclide}       % Geometric constructions (depends on TikZ)

\pgfplotsset{compat=1.18}  % Set the version of pgfplots

% ========================================================================

\RequirePackage{polyglossia}                   % Multilingual support

\ifpackagesetmemoirenglish
  \setmainlanguage{english}
\else
  \setmainlanguage{german}
\fi

\RequirePackage[no-math, quiet]{fontspec}      % Modern font selection
\RequirePackage{xeCJK}                         % For CJK (Chinese, Japanese, Korean) fonts

% ========================================================================

\makeatletter
\@ifundefined{theHpagenote}{}{\let\theHpagenote\relax}
\makeatother

% Silence memoir/glossaries redefinition warnings
\makeatletter
\let\printglossary\relax
\let\theglossary\relax
\let\endtheglossary\relax
\makeatother

\RequirePackage[unicode=true, pdfborder={0 0 0}]{hyperref}    % Hyperlinks
\RequirePackage[nameinlink]{cleveref}                         % Smart cross-refs
\RequirePackage[                                              % Bibliographies with biblatex
  backend=biber, style=numeric, sorting=none,
  % language=english, autolang=other % for multilingual bibliographies
]{biblatex}
\ifpackagesetmemoirindex
  \RequirePackage{makeidx}                                    % Indexing
\fi
\ifpackagesetmemoirglossary
  \RequirePackage[acronym]{glossaries}                        % Acronyms and glossaries
\fi

% ========================================================================

\RequirePackage{amsmath, amssymb, amsthm}
\RequirePackage{bm}        % Bold math
\RequirePackage{esvect}    % Vector symbols
\RequirePackage{faktor}    % Quotient groups
\RequirePackage{mathtools}

% ========================================================================

\RequirePackage{array}
\RequirePackage{makecell}
\RequirePackage{multicol}
\RequirePackage{nicematrix}
\RequirePackage{tabularx}
\RequirePackage{xltabular}

% ========================================================================

\RequirePackage{adjustbox}    % Adjust the size of boxes
\RequirePackage{indentfirst}  % Indent the first paragraph
\RequirePackage{ragged2e}     % Ragged text alignment
\RequirePackage{scalerel}     % Scale objects
\RequirePackage{seqsplit}     % Split long sequences

% ========================================================================

\RequirePackage{enumitem}  % Customizable lists

\setlist[enumerate]{topsep=0pt, itemsep=0pt}
\setlist[itemize]{topsep=0pt}

% ========================================================================

\RequirePackage{lineno}    % Line numbering
\RequirePackage{listings}  % Code formatting
\RequirePackage{minted}    % Code highlighting

% ========================================================================

\RequirePackage{authblk}    % Author and affiliation formatting
\RequirePackage{collcell}   % Collect cell content
\RequirePackage{datetime2}  % Date formatting
\RequirePackage{epigraph}   % Quotations
\RequirePackage{etoolbox}   % General programming tools
\RequirePackage{pdfpages}   % Include PDFs
\RequirePackage{siunitx}    % SI units
\RequirePackage{wrapfig}    % Wrap text around figures

% ========================================================================

\RequirePackage{ifthen}     % Conditional statements
\RequirePackage{xparse}     % Document command parsing
\RequirePackage{xstring}    % String manipulation

% ========================================================================

% \RequirePackage{blindtext}
% \RequirePackage{lipsum}

% ========================================================================

